[gd_scene load_steps=6 format=3 uid="uid://d34wwl7yqbe5r"]

[ext_resource type="PackedScene" uid="uid://cjye6xpdv34of" path="res://PlayerCharacter/PlayerCharacter.tscn" id="1_lxk7a"]
[ext_resource type="PackedScene" uid="uid://dkix8gwtvv1ki" path="res://TransformationObjects/transformation_object.tscn" id="2_67gti"]
[ext_resource type="PackedScene" uid="uid://dvrh8nj8aokk1" path="res://Enemies/guard.tscn" id="3_kj1fg"]
[ext_resource type="PackedScene" uid="uid://b5orbkqm40yjl" path="res://Level/Detection/local_allowed_items.tscn" id="4_u1lvf"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_71oav"]
vertices = PackedVector2Array(-64, 184, 1888, 1536, -2224, 1896, -536, 232, -2320, -2272, -560, -40, 2120, -1840, -80, -128)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(3, 2, 4, 5), PackedInt32Array(5, 4, 6, 7), PackedInt32Array(7, 6, 1, 0)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-560, -40, -80, -128, -64, 184, -536, 232), PackedVector2Array(-2224, 1896, -2320, -2272, 2120, -1840, 1888, 1536)])

[node name="PlayerTransformTest" type="Node2D"]

[node name="PlayerCharacter" parent="." instance=ExtResource("1_lxk7a")]

[node name="TransformationObject" parent="." instance=ExtResource("2_67gti")]
position = Vector2(205, 3)
transformedName = "Statue"
transformedMaxSpeed = 200.0
transformedProperties = Array[String](["Sturdy"])

[node name="TransformationObject2" parent="." instance=ExtResource("2_67gti")]
position = Vector2(-424, 80)
transformedName = "Poop"
transformedMaxSpeed = 1000.0
transformedProperties = Array[String](["Stinky"])

[node name="Guard" parent="." node_paths=PackedStringArray("moveActions") instance=ExtResource("3_kj1fg")]
patrolActions = Array[int]([1, 1, 0, 2, 0, 1, 2, 0, 1, 0])
waitActions = Array[float]([2.0, 2.0, 5.0, 2.0])
moveActions = [NodePath("../FirstCheckPoint"), NodePath("../SecondCheckPoint"), NodePath("../FirstCheckPoint"), NodePath("../ThirdCheckPoint")]
lookActions = Array[int]([1, 2])

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(0, -24)
navigation_polygon = SubResource("NavigationPolygon_71oav")

[node name="FirstCheckPoint" type="Node2D" parent="."]
position = Vector2(-192, 192)

[node name="SecondCheckPoint" type="Node2D" parent="."]
position = Vector2(448, 192)

[node name="ThirdCheckPoint" type="Node2D" parent="."]
position = Vector2(-360, -200)

[node name="LocalAllowedItems" parent="." node_paths=PackedStringArray("assignedObjects") instance=ExtResource("4_u1lvf")]
position = Vector2(-344, 88)
scale = Vector2(21.735, 13.925)
allowedObjects = Array[String](["Poop"])
assignedObjects = [null]

[connection signal="give_self_reference" from="PlayerCharacter" to="Guard" method="_on_player_character_give_self_reference"]
[connection signal="give_self_reference" from="PlayerCharacter" to="LocalAllowedItems" method="_on_player_character_give_self_reference"]
[connection signal="set_trs_notReady" from="TransformationObject" to="PlayerCharacter" method="_on_transformation_object_set_trs_not_ready"]
[connection signal="set_trs_ready" from="TransformationObject" to="PlayerCharacter" method="_on_transformation_object_set_trs_ready"]
[connection signal="set_trs_notReady" from="TransformationObject2" to="PlayerCharacter" method="_on_transformation_object_set_trs_not_ready"]
[connection signal="set_trs_ready" from="TransformationObject2" to="PlayerCharacter" method="_on_transformation_object_set_trs_ready"]
[connection signal="get_character_ref" from="Guard" to="PlayerCharacter" method="_on_guard_get_character_ref"]
